{% extends 'base.html' %}
{% load static %}
{% block content %}

{% block extra_css %}
<style>
    body {
        background-color: #f4f6f9;
    }
    .endpoint-card {
        margin-bottom: 20px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    .curl-code {
        position: relative;
    }
    .copy-btn {
        position: absolute;
        top: 10px;
        right: 10px;
    }
    pre {
        background-color: #f8f9fa;
        padding: 15px;
        border-radius: 5px;
    }
    .nav-pills .nav-link.active {
        background-color: #0d6efd;
    }
</style>
{% endblock %}

    <div class="container-fluid">

        <div class="container mt-4">
            <div class="col">
                <!-- Sidebar Navigation -->
                <div class="row-md-12 p-2 bg-light mb-2">
                    <div class="nav flex-row nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                        <a class="nav-link active" id="v-pills-token-tab" data-bs-toggle="pill" href="#v-pills-token" role="tab">Generate Token</a>
                        <a class="nav-link" id="v-pills-refresh-tab" data-bs-toggle="pill" href="#v-pills-refresh" role="tab">Refresh Token</a>
                        <a class="nav-link" id="v-pills-send-tab" data-bs-toggle="pill" href="#v-pills-send" role="tab">Send SMS</a>
                        <a class="nav-link" id="v-pills-status-tab" data-bs-toggle="pill" href="#v-pills-status" role="tab">Check Message Status</a>
                        <a class="nav-link" id="v-pills-balance-tab" data-bs-toggle="pill" href="#v-pills-balance" role="tab">Check Balance</a>
                        <a class="nav-link" id="v-pills-errors-tab" data-bs-toggle="pill" href="#v-pills-errors" role="tab">Error Codes</a>
                    </div>
                </div>

                <!-- Endpoint Details -->
                <div class="col-md-12">
                    <div class="tab-content" id="v-pills-tabContent">
                        <!-- Generate Token Endpoint -->
                        <div class="tab-pane fade show active" id="v-pills-token" role="tabpanel">
                            <div class="card endpoint-card">
                                <div class="card-header bg-info text-white">
                                    <h5 class="text-white">Generate API Token</h5>
                                </div>
                                <div class="card-body">
                                    <h6>Endpoint</h6>
                                    <code>POST /auth/token</code>

                                    <h6 class="mt-3">Request Parameters</h6>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Type</th>
                                                <th>Description</th>
                                                <th>Required</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>username</td>
                                                <td>string</td>
                                                <td>API username</td>
                                                <td>Yes</td>
                                            </tr>
                                            <tr>
                                                <td>password</td>
                                                <td>string</td>
                                                <td>API password</td>
                                                <td>Yes</td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <h6>Sample cURL Request</h6>
                                    <div class="curl-code position-relative">
                                        <pre><code id="tokenCurl">curl -X POST https://api.wtsdealnow.com/auth/token \
-H "Content-Type: application/json" \
-d '{"username": "your_username", "password": "your_password"}'</code></pre>
                                        <button class="btn btn-secondary copy-btn" onclick="copyToClipboard('tokenCurl')">Copy</button>
                                    </div>

                                    <h6 class="mt-3">Successful Response</h6>
                                    <pre><code>{
    "token": "access_token",
    "refresh_token": "refresh_token"
}</code></pre>
                                </div>
                            </div>
                        </div>

                        <!-- Refresh Token Endpoint -->
                        <div class="tab-pane fade" id="v-pills-refresh" role="tabpanel">
                            <div class="card endpoint-card">
                                <div class="card-header bg-info text-white">
                                    <h5 class="text-white">Refresh Token</h5>
                                </div>
                                <div class="card-body">
                                    <h6>Endpoint</h6>
                                    <code>POST /auth/token/refresh</code>

                                    <h6 class="mt-3">Request Headers</h6>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Value</th>
                                                <th>Description</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Authorization</td>
                                                <td>Bearer {refresh_token}</td>
                                                <td>Existing refresh token</td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <h6>Sample cURL Request</h6>
                                    <div class="curl-code position-relative">
                                        <pre><code id="refreshCurl">curl -X POST https://api.wtsdealnow.com/auth/token/refresh \
-H "Authorization: Bearer your_refresh_token"</code></pre>
                                        <button class="btn btn-secondary copy-btn" onclick="copyToClipboard('refreshCurl')">Copy</button>
                                    </div>

                                    <h6 class="mt-3">Successful Response</h6>
                                    <pre><code>{
    "token": "new_access_token",
    "refresh_token": "new_refresh_token"
}</code></pre>

                                    <h6 class="mt-3">Possible Errors</h6>
                                    <ul>
                                        <li>401 Unauthorized - Invalid or expired refresh token</li>
                                        <li>500 Internal Server Error - Token refresh failed</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Send SMS Endpoint -->
                        <div class="tab-pane fade" id="v-pills-send" role="tabpanel">
                            <div class="card endpoint-card">
                                <div class="card-header bg-info text-white">
                                    <h5 class="text-white">Send SMS</h5>
                                </div>
                                <div class="card-body">
                                    <h6>Endpoint</h6>
                                    <code>POST /sms/send</code>

                                    <h6 class="mt-3">Request Headers</h6>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Value</th>
                                                <th>Description</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Authorization</td>
                                                <td>Bearer {access_token}</td>
                                                <td>Valid access token</td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <h6>Request Parameters</h6>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Type</th>
                                                <th>Description</th>
                                                <th>Required</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>sender</td>
                                                <td>string</td>
                                                <td>Sender's phone number or ID</td>
                                                <td>Yes</td>
                                            </tr>
                                            <tr>
                                                <td>receiver</td>
                                                <td>array</td>
                                                <td>List of recipient phone numbers</td>
                                                <td>Yes</td>
                                            </tr>
                                            <tr>
                                                <td>contentType</td>
                                                <td>string</td>
                                                <td>Type of SMS content (e.g., TEXT)</td>
                                                <td>Yes</td>
                                            </tr>
                                            <tr>
                                                <td>content</td>
                                                <td>string</td>
                                                <td>SMS message content</td>
                                                <td>Yes</td>
                                            </tr>
                                            <tr>
                                                <td>msgType</td>
                                                <td>string</td>
                                                <td>Message type (optional)</td>
                                                <td>No</td>
                                            </tr>
                                            <tr>
                                                <td>requestType</td>
                                                <td>string</td>
                                                <td>Request type (optional)</td>
                                                <td>No</td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <h6>Sample cURL Request</h6>
                                    <div class="curl-code position-relative">
                                        <pre><code id="smsCurl">curl -X POST https://api.wtsdealnow.com/sms/send \
-H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
-H "Content-Type: application/json" \
-d '{
    "sender": "SENDER_ID",
    "receiver": ["1234567890"],
    "contentType": "TEXT",
    "content": "Hello World!",
    "msgType": "TRANSACTIONAL",
    "requestType": "SINGLE"
}'</code></pre>
                                        <button class="btn btn-secondary copy-btn" onclick="copyToClipboard('smsCurl')">Copy</button>
                                    </div>

                                    <h6 class="mt-3">Successful Response</h6>
                                    <pre><code>{
    "status": "SUCCESS",
    "description": "Message sent",
    "msgCost": "1",
    "currentBalance": "99",
    "contentType": "TEXT",
    "msgCount": 1,
    "errorCode": 0,
    "messageId": "UNIQUE_MESSAGE_ID"
}</code></pre>
                                </div>
                            </div>
                        </div>

                        <!-- Message Status Endpoint -->
                        <div class="tab-pane fade" id="v-pills-status" role="tabpanel">
                            <div class="card endpoint-card">
                                <div class="card-header bg-info text-white">
                                    <h5 class="text-white">Check Message Status</h5>
                                </div>
                                <div class="card-body">
                                    <h6>Endpoint</h6>
                                    <code>GET /sms/status</code>

                                    <h6 class="mt-3">Request Headers</h6>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Value</th>
                                                <th>Description</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Authorization</td>
                                                <td>Bearer {access_token}</td>
                                                <td>Valid access token</td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <h6>Query Parameters</h6>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Type</th>
                                                <th>Description</th>
                                                <th>Required</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>sender</td>
                                                <td>string</td>
                                                <td>Sender's phone number or ID</td>
                                                <td>Yes</td>
                                            </tr>
                                            <tr>
                                                <td>messageId</td>
                                                <td>string</td>
                                                <td>Unique message ID from send SMS response</td>
                                                <td>Yes</td>
                                            </tr>
                                            <tr>
                                                <td>receiver</td>
                                                <td>string</td>
                                                <td>Recipient's phone number</td>
                                                <td>Yes</td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <h6>Sample cURL Request</h6>
                                    <div class="curl-code position-relative">
                                        <pre><code id="statusCurl">curl -X GET "https://api.wtsdealnow.com/sms/status?sender=SENDER_ID&messageId=MESSAGE_ID&receiver=1234567890" \
-H "Authorization: Bearer YOUR_ACCESS_TOKEN"</code></pre>
                                        <button class="btn btn-secondary copy-btn" onclick="copyToClipboard('statusCurl')">Copy</button>
                                    </div>

                                    <h6 class="mt-3">Successful Response</h6>
                                    <pre><code>{
    "status": "DELIVERED",
    "description": "Message delivered successfully",
    "msgCost": "1",
    "messageId": "UNIQUE_MESSAGE_ID"
}</code></pre>
                                </div>
                            </div>
                        </div>

                        <!-- Account Balance Endpoint -->
                        <div class="tab-pane fade" id="v-pills-balance" role="tabpanel">
                            <div class="card endpoint-card">
                                <div class="card-header bg-info text-white">
                                    <h5 class="text-white">Check Account Balance</h5>
                                </div>
                                <div class="card-body">
                                    <h6>Endpoint</h6>
                                    <code>GET /account/balance</code>

                                    <h6 class="mt-3">Request Headers</h6>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Value</th>
                                                <th>Description</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Authorization</td>
                                                <td>Bearer {access_token}</td>
                                                <td>Valid access token</td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <h6>Query Parameters</h6>
                                    <table class="table table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Type</th>
                                                <th>Description</th>
                                                <th>Required</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>username</td>
                                                <td>string</td>
                                                <td>API username</td>
                                                <td>Yes</td>
                                            </tr>
                                        </tbody>
                                    </table>

                                    <h6>Sample cURL Request</h6>
                                    <div class="curl-code position-relative">
                                        <pre><code id="balanceCurl">curl -X GET "https://api.wtsdealnow.com/account/balance?username=YOUR_USERNAME" \
-H "Authorization: Bearer YOUR_ACCESS_TOKEN"</code></pre>
                                        <button class="btn btn-secondary copy-btn" onclick="copyToClipboard('balanceCurl')">Copy</button>
                                    </div>

                                    <h6 class="mt-3">Successful Response</h6>
                                    <pre><code>{
    "status": "SUCCESS",
    "guiBalance": "100.00",
    "apiBalance": "50.00"
}</code></pre>
                                </div>
                            </div>
                        </div>

                        <!-- Error Codes -->
                        <div class="tab-pane fade" id="v-pills-errors" role="tabpanel">
                            <div class="card endpoint-card">
                                <div class="card-header bg-danger text-white">
                                    <h5 class="text-white">Error Codes</h5>
                                </div>
                                <div class="card-body">
                                    <table class="table table-striped table-bordered">
                                        <thead>
                                            <tr>
                                                <th>Error Code</th>
                                                <th>Description</th>
                                                <th>Possible Cause</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>401</td>
                                                <td>Unauthorized</td>
                                                <td>Invalid credentials, expired token, or missing authorization</td>
                                            </tr>
                                            <tr>
                                                <td>403</td>
                                                <td>Forbidden</td>
                                                <td>Insufficient permissions or invalid token</td>
                                            </tr>
                                            <tr>
                                                <td>404</td>
                                                <td>Not Found</td>
                                                <td>Resource not found (user, sender ID, etc.)</td>
                                            </tr>
                                            <tr>
                                                <td>1506</td>
                                                <td>Insufficient Balance</td>
                                                <td>Not enough credit to send SMS</td>
                                            </tr>
                                            <tr>
                                                <td>500</td>
                                                <td>Internal Server Error</td>
                                                <td>Unexpected server-side error</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        function copyToClipboard(elementId) {
            const copyText = document.getElementById(elementId);
            const textArea = document.createElement('textarea');
            textArea.value = copyText.textContent;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);

            const button = event.target;
            const originalText = button.textContent;
            button.textContent = 'Copied!';
            button.classList.remove('btn-secondary');
            button.classList.add('btn-success');

            setTimeout(() => {
                button.textContent = originalText;
                button.classList.remove('btn-success');
                button.classList.add('btn-secondary');
            }, 2000);
        }
    </script>

{% block extra_js %}
<script>
  document.addEventListener("DOMContentLoaded", function() {
    var dashboardLink = document.getElementById('Manual');
    if (dashboardLink) {
      dashboardLink.classList.add('active');
    }
  });
</script>
{% endblock %}
{% endblock %}